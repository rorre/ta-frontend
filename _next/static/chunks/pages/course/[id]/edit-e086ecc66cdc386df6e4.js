(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{153:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var o=t(1607),n=t(5893);function s(){return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,n.jsx)(o.Z,{type:"TailSpin",color:"#2563eb",height:100,width:100})})}},3440:function(e,r,t){"use strict";t.d(r,{Z:function(){return k}});var o=t(2809),n=t(9669),s=t.n(n),a=t(1163),l=t(2283),i=t(8279),c=t(219),u=t(2866),d=t(5152),m=t(5893),p=["id","label","placeholderText","register","validators","errors","type","useErrorMessage"];function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=(0,d.default)((function(){return t.e(682).then(t.bind(t,8682))}),{ssr:!1,loadableGenerated:{webpack:function(){return[8682]},modules:["..\\components\\creator\\Fields.tsx -> react-select"]}}),x={control:function(e){return b(b({},e),{},{backgroundColor:"transparent",borderWidth:"1px",borderBottomWidth:"1px",boxShadow:"none",margin:0,minHeight:0,borderRadius:"0.25rem",paddingLeft:"0.75rem"})},menuList:function(e){return b(b({},e),{},{paddingTop:0,paddingBottom:0})},placeholder:function(e,r){return b(b({},e),{},{color:r.hasValue?"#773b6b":"hsl(0, 0%, 50%)"})},valueContainer:function(e){return b(b({},e),{},{padding:0,paddingTop:"0.5rem",paddingBottom:"0.5rem"})}},g=function(e){var r=e.message;return(0,m.jsx)("span",{className:"pt-2 text-red-600",children:r})},v=function(e){var r=e.id,t=e.label,o=e.placeholderText,n=e.register,s=e.validators,a=e.errors,l=e.type,i=void 0===l?"text":l,d=e.useErrorMessage,h=void 0===d||d,f=(0,c.Z)(e,p);return(0,m.jsxs)("div",{className:"mb-4 md:mr-2 md:mb-0",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:r,children:t}),(0,m.jsx)("input",b(b({},n(r,s)),{},{className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none hover:shadow focus:border-blue-600",id:r,type:i,placeholder:o,autoComplete:"on"},f)),h&&(0,m.jsx)(u.B,{name:r,errors:a,render:g})]})},j=function(e){var r=e.id,t=e.label,o=e.placeholderText,n=e.control,s=e.validators,a=e.options,i=e.errors,c=e.useErrorMessage,d=void 0===c||c;return(0,m.jsxs)("div",{className:"mb-4 md:mr-2 md:mb-0",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:r,children:t}),(0,m.jsx)(l.Qr,{name:r,control:n,render:function(e){var t=e.field,n=t.onChange,s=t.value,l=t.name,i=t.ref;return(0,m.jsx)(f,{inputRef:i,value:a.find((function(e){return e.value===s})),name:l,id:r,instanceId:r,options:a,placeholder:o,isSearchable:!1,onChange:function(e){return n(null===e||void 0===e?void 0:e.value)},styles:x,className:"text-base"})},rules:s}),d&&(0,m.jsx)(u.B,{name:r,errors:i,render:g})]})},y=function(e){var r=e.children;return(0,m.jsx)("div",{className:"grid md:grid-cols-2 gap-x-2 md:gap-y-1 items-center md:gap-x-4 lg:gap-x-24 lg:gap-y-4",children:r})};function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N=[{label:"DDP",value:"ddp"},{label:"MatDis",value:"matdis"},{label:"Kalkulus",value:"kalkulus"},{label:"PSD",value:"psd"},{label:"ManBis",value:"manbis"},{label:"Kombistek",value:"kombistek"},{label:"Other",value:"other"}],k=function(e){var r=e.course,t=void 0===r?null:r,o=e.mutator,n=void 0===o?null:o;t&&N.forEach((function(e){e.label==t.matkul&&(t.matkul=e.value)}));var c=(0,l.cI)({defaultValues:t}),u=c.control,d=c.register,p=c.formState.errors,h=c.handleSubmit,b=(0,a.useRouter)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"bg-blue-600 text-white rounded-md border border-white p-4 mb-4",children:[(0,m.jsx)("h3",{className:"text-lg font-bold",children:"Notes"}),(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{className:"list-disc ml-8",children:[(0,m.jsx)("li",{children:"You may only have two upcoming classes at the same time."}),(0,m.jsxs)("li",{children:["You can use markdown to format notes. If you don't know what that is,"," ",(0,m.jsx)("a",{className:"hover:text-gray-300",href:"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet",children:"You can read the cheat sheet here"}),"."]})]})})]}),(0,m.jsxs)("form",{onSubmit:h((function(e){var r;""===e.students_limit&&(e.students_limit=null),r=t?"".concat("https://ta-api.rorre.xyz","/course/").concat(t.id,"/update"):"".concat("https://ta-api.rorre.xyz","/course/create"),i.ZP.promise(s().post(r,e,{withCredentials:!0}),{loading:"Submitting course...",success:"Submitted!",error:function(e){return e.response?e.response.data.detail:"An error has occured."}}).then((function(){b.push("/course"),n&&n()})).catch((function(){}))})),className:"md:flex flex-col space-y-3",children:[(0,m.jsxs)(y,{children:[(0,m.jsx)(v,{id:"name",label:"Course Name",placeholderText:"",register:d,validators:{required:{value:!0,message:"You need to provide a name."},maxLength:{value:100,message:"Course name exceeds 100 characters."}},errors:p,useErrorMessage:!0}),(0,m.jsx)(j,{id:"matkul",label:"Subject",placeholderText:"",options:N,control:u,errors:p,validators:{required:{value:!0,message:"You need to fill in the subject."}},useErrorMessage:!0})]}),(0,m.jsxs)(y,{children:[(0,m.jsx)(v,{id:"datetime",label:"Date and Time",placeholderText:"When will the course starts?",register:d,validators:{required:{value:!0,message:"You need to provide the date and time."}},type:"datetime-local",errors:p,useErrorMessage:!0}),(0,m.jsx)(v,{id:"students_limit",label:"Student Limit",placeholderText:"You may set to 0 for no limit.",register:d,type:"number",validators:{min:0},errors:p,useErrorMessage:!0,min:0})]}),(0,m.jsx)(v,{id:"link",label:"Meet/Zoom URL",placeholderText:"",register:d,errors:p,useErrorMessage:!1}),(0,m.jsxs)("div",{className:"mb-4 md:mr-2 md:mb-0",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"notes",children:"Notes"}),(0,m.jsx)("textarea",O(O({},d("notes")),{},{className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none hover:shadow focus:border-blue-600",id:"notes",placeholder:"Notes to be posted on site. Markdown supported."}))]}),(0,m.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-blue-600 p-2 text-white",children:"Submit"})]})]})}},3547:function(e,r,t){"use strict";t.r(r);var o=t(1163),n=t(3440),s=t(153),a=t(4984),l=t(8279),i=t(7294),c=t(2962),u=t(5893);r.default=function(){var e=(0,o.useRouter)(),r=(0,a.a)().user,t=e.query.id,d=(0,a.T)(t),m=d.course,p=d.error,h=d.notFound,b=d.isLoading,f=d.mutate,x=d.errorMessage;return(0,i.useEffect)((function(){p&&void 0!==t&&(l.ZP.error(x),e.replace("/course"))}),[m,p]),(0,i.useEffect)((function(){m&&r&&m.teacher_npm!=r.npm&&(l.ZP.error("You are not allowed to do so."),e.replace("/course"))}),[m,r]),h&&(e.replace("/course"),l.ZP.error("Course not found.")),b||!m?(0,u.jsx)(s.Z,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.PB,{title:"Edit Course"}),(0,u.jsx)("h2",{className:"font-bold text-2xl pb-2",children:"Edit Course"}),(0,u.jsx)("hr",{className:"pb-2"}),(0,u.jsx)(n.Z,{course:m,mutator:f})]})}},6668:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/[id]/edit",function(){return t(3547)}])}},function(e){e.O(0,[774,607,483,888,179],(function(){return r=6668,e(e.s=r);var r}));var r=e.O();_N_E=r}]);